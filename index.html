<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ABSI NEXUS | Advanced Trading Chart</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --bg: #0b0e11; --card: #1e2329; --yellow: #fcd535; --text: #ffffff; --gray: #848e9c; --border: #2b3139; --green: #0ecb81; --red: #f6465d; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; margin: 0; padding-bottom: 70px; overflow-x: hidden; }
        
        /* الهيدر العلوي */
        .main-header { text-align: center; padding: 12px 0; border-bottom: 1px solid var(--border); background: var(--bg); }
        .brand-name { font-size: 1.2rem; font-weight: bold; color: var(--yellow); letter-spacing: 1px; }
        .pair-title { font-size: 0.9rem; font-weight: bold; margin-top: 5px; }

        /* تبويبات الخيارات */
        .sub-nav { display: flex; justify-content: center; gap: 20px; padding: 10px 0; border-bottom: 1px solid var(--border); font-size: 0.85rem; }
        .sub-nav span { color: var(--gray); cursor: pointer; padding-bottom: 5px; }
        .sub-nav span.active { color: var(--yellow); border-bottom: 2px solid var(--yellow); }

        /* منطقة السعر (كما في الصورة) */
        .price-dashboard { display: flex; justify-content: space-between; padding: 15px 20px; border-bottom: 1px solid var(--border); }
        .price-main { font-size: 1.8rem; font-weight: bold; color: var(--red); }
        .price-stats { font-size: 0.7rem; color: var(--gray); text-align: left; line-height: 1.4; }

        /* شريط الفريمات والمؤشرات */
        .toolbar { display: flex; align-items: center; gap: 12px; padding: 8px 15px; background: #181a20; border-bottom: 1px solid var(--border); overflow-x: auto; font-size: 0.75rem; }
        .toolbar span { color: var(--gray); white-space: nowrap; cursor: pointer; }
        .toolbar .indicator-btn { color: var(--yellow); font-weight: bold; border: 1px solid var(--yellow); padding: 2px 8px; border-radius: 4px; }

        /* منطقة الرسم البياني */
        .chart-wrapper { width: 100%; height: 500px; background: var(--bg); position: relative; }
        #tv_chart_container { width: 100%; height: 100%; }

        /* قائمة المؤشرات (Popup) */
        .indicators-menu { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--card); border: 1px solid var(--border); border-radius: 8px; z-index: 2000; width: 80%; padding: 15px; }
        .indicators-menu h4 { margin-top: 0; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        .ind-option { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #2b3139; cursor: pointer; }

        /* الأزرار السفلية */
        .action-bar { display: flex; gap: 10px; padding: 10px 15px; position: fixed; bottom: 62px; width: 100%; background: var(--bg); box-sizing: border-box; }
        .btn { flex: 1; padding: 12px; border: none; border-radius: 5px; font-weight: bold; color: #fff; font-size: 1rem; }

        /* التنقل السفلي */
        .nav-bottom { position: fixed; bottom: 0; width: 100%; background: #12161c; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid var(--border); z-index: 1000; }
        .nav-link { text-align: center; color: var(--gray); text-decoration: none; font-size: 0.7rem; }
        .nav-link.active { color: #fff; }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="brand-name">ABSI NEXUS</div>
        <div class="pair-title">RVV / USDT</div>
    </header>

    <nav class="sub-nav">
        <span class="active">الرسم البياني</span>
        <span>الأسواق</span>
        <span>معلومات</span>
        <span>بيانات التداول</span>
    </nav>

    <div class="price-dashboard">
        <div>
            <div class="price-main">0.0{12}228</div>
            <div style="color:var(--red); font-size:0.8rem;">≈$0.0(12)22 USD -26.45%</div>
        </div>
        <div class="price-stats">
            24h صعود: 0.0{12}366<br>
            24h هبوط: 0.0{12}202<br>
            24h حجم: 964,939T
        </div>
    </div>

    <div class="toolbar">
        <span>15m</span><span>1h</span><span>4h</span><span>1D</span><span>أسبوع</span>
        <span class="indicator-btn" onclick="toggleIndicators()">المؤشرات <i class="fas fa-chart-area"></i></span>
    </div>

    <div class="chart-wrapper">
        <div id="tv_chart_container"></div>
    </div>

    <div id="indMenu" class="indicators-menu">
        <h4>اختر المؤشرات التقنية</h4>
        <div class="ind-option" onclick="addIndicator('MA')"><span>Moving Average (MA)</span> <i class="fas fa-plus"></i></div>
        <div class="ind-option" onclick="addIndicator('RSI')"><span>Relative Strength Index (RSI)</span> <i class="fas fa-plus"></i></div>
        <div class="ind-option" onclick="addIndicator('MACD')"><span>MACD</span> <i class="fas fa-plus"></i></div>
        <div class="ind-option" onclick="addIndicator('VOL')"><span>Volume (حجم التداول)</span> <i class="fas fa-plus"></i></div>
        <button onclick="toggleIndicators()" style="width:100%; margin-top:15px; padding:10px; background:var(--yellow); border:none; border-radius:4px; font-weight:bold;">إغلاق</button>
    </div>

    <div class="action-bar">
        <button class="btn" style="background:var(--green)">شراء</button>
        <button class="btn" style="background:var(--red)">بيع</button>
    </div>

    <nav class="nav-bottom">
        <a onclick="location.replace('index.html')" class="nav-link active"><i class="fas fa-chart-line"></i><br>الرسم البياني</a>
        <a onclick="location.replace('markets.html')" class="nav-link"><i class="fas fa-poll"></i><br>الأسواق</a>
        <a onclick="location.replace('trade.html')" class="nav-link"><i class="fas fa-exchange-alt"></i><br>تداول</a>
        <a onclick="location.replace('futures.html')" class="nav-link"><i class="fas fa-file-contract"></i><br>العقود</a>
        <a onclick="location.replace('wallet.html')" class="nav-link"><i class="fas fa-wallet"></i><br>الأصول</a>
    </nav>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        let widget;

        function initChart() {
            widget = new TradingView.widget({
                "autosize": true,
                "symbol": "MEXC:RVVUSDT", // تم ربط العملة المطلوبة
                "interval": "15",
                "timezone": "Etc/UTC",
                "theme": "dark",
                "style": "1",
                "locale": "ar",
                "toolbar_bg": "#f1f3f6",
                "enable_publishing": false,
                "hide_side_toolbar": false,
                "allow_symbol_change": true,
                "container_id": "tv_chart_container",
                "studies": [
                    "MASimple@tv-basicstudies",
                    "RSI@tv-basicstudies"
                ]
            });
        }

        function toggleIndicators() {
            const menu = document.getElementById('indMenu');
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }

        // محاكاة إضافة مؤشر برمجياً (في المكتبة المتقدمة يتم عبر Chart API)
        function addIndicator(type) {
            alert("تم تفعيل مؤشر " + type + " على الرسم البياني بنجاح");
            toggleIndicators();
        }

        window.onload = initChart;

        // نظام الرجوع الذكي
        (function() {
            history.pushState(null, null, location.href);
            window.onpopstate = function() {
                if(confirm("هل تريد الخروج من ABSI NEXUS؟")) { window.close(); }
                else { history.pushState(null, null, location.href); }
            };
        })();
    </script>
</body>
</html>
