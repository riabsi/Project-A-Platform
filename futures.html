<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000"> <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <title>ABSI NEXUS | Professional Futures</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --bg-deep: #000000; /* أسود مطلق للخلفية */
            --bg-card: #0b0e11;
            --border: #1e2329;
            --green: #0ecb81;
            --red: #f6465d;
            --yellow: #fcd535;
            --gray: #848e9c;
        }

        /* تنسيق الجسم ليملأ كامل الشاشة */
        body { 
            background: var(--bg-deep); 
            color: #eaecef; 
            font-family: 'SF Pro Display', -apple-system, sans-serif; 
            margin: 0; 
            padding: 0;
            overflow-x: hidden;
            font-size: 11px; /* تصغير الزوم لزيادة الاحترافية */
        }

        /* شريط علوي احترافي */
        .top-nav {
            background: var(--bg-deep);
            padding: 15px 10px 5px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .pair-info { display: flex; align-items: center; gap: 8px; cursor: pointer; }
        .pair-name { font-size: 18px; font-weight: 800; letter-spacing: -0.5px; }

        /* منطقة الهامش والرافعة */
        .settings-bar {
            display: flex;
            padding: 5px 10px;
            gap: 8px;
            background: var(--bg-deep);
        }
        .config-pill {
            background: #1e2329;
            border-radius: 4px;
            padding: 4px 12px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid transparent;
        }
        .config-pill:active { border-color: var(--yellow); }

        /* التخطيط الرئيسي */
        .main-container { display: flex; padding: 10px; gap: 15px; }

        /* عمود التحكم (يمين) */
        .trade-side { flex: 1.3; }
        .mode-tabs {
            display: flex;
            border-radius: 6px;
            background: #1e2329;
            margin-bottom: 12px;
            overflow: hidden;
            height: 34px;
        }
        .mode-btn { flex: 1; border: none; background: none; color: var(--gray); font-weight: bold; cursor: pointer; }
        .mode-btn.buy.active { background: var(--green); color: white; }
        .mode-btn.sell.active { background: var(--red); color: white; }

        /* المدخلات */
        .input-group {
            background: #1e2329;
            border-radius: 6px;
            padding: 8px 12px;
            margin-bottom: 8px;
            border: 1px solid transparent;
            display: flex;
            justify-content: space-between;
        }
        .input-group:focus-within { border-color: var(--yellow); }
        .input-group input { background: none; border: none; color: white; width: 80%; outline: none; font-weight: bold; }

        .action-btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 6px;
            font-weight: 800;
            font-size: 14px;
            margin-top: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* دفتر الطلبات (يسار) */
        .book-side { flex: 0.7; }
        .book-row { display: flex; justify-content: space-between; height: 18px; align-items: center; position: relative; }
        .price-up { color: var(--red); }
        .price-down { color: var(--green); }

        /* شريط التنقل السفلي الاحترافي */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 65px;
            background: #000;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid #1e2329;
            padding-bottom: env(safe-area-inset-bottom); /* لدعم آيفون الجديد */
        }
        .nav-item { color: var(--gray); text-decoration: none; text-align: center; font-size: 10px; flex: 1; }
        .nav-item.active { color: #fff; }
        .nav-item i { font-size: 20px; margin-bottom: 4px; }

        /* المودال */
        .modal { 
            position: fixed; bottom: -100%; left: 0; width: 100%; 
            background: #161a1e; border-radius: 20px 20px 0 0; 
            padding: 20px; z-index: 1001; transition: 0.3s;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
        }
        .modal.active { bottom: 0; }
        .overlay { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; }
    </style>
</head>
<body>

    <div class="top-nav">
        <div class="pair-info" onclick="toggleModal('pair-modal')">
            <i class="fas fa-bars" style="color:var(--yellow)"></i>
            <span class="pair-name">BTCUSDT</span>
            <span style="background:#1e2329; padding:2px 5px; border-radius:3px; color:var(--gray)">دائم</span>
            <i class="fas fa-caret-down"></i>
        </div>
        <div style="text-align: left">
            <div style="color:var(--green); font-size:14px; font-weight:bold">+3.12%</div>
        </div>
    </div>

    <div class="settings-bar">
        <div class="config-pill" onclick="toggleModal('margin-modal')" id="m-val">متبادل</div>
        <div class="config-pill" onclick="toggleModal('leverage-modal')" id="l-val">50x</div>
    </div>

    <div class="main-container">
        <div class="trade-side">
            <div class="mode-tabs">
                <button class="mode-btn buy active" id="m-buy">شراء</button>
                <button class="mode-btn sell" id="m-sell">بيع</button>
            </div>

            <div class="input-group">
                <input type="number" value="68420.50">
                <span style="color:var(--gray)">USDT</span>
            </div>

            <div class="input-group">
                <input type="number" placeholder="الكمية">
                <span style="color:var(--gray)">BTC</span>
            </div>

            <div style="margin:15px 0;">
                <input type="range" style="width:100%; accent-color:var(--yellow);" min="0" max="100" value="0">
            </div>

            <div style="display:flex; justify-content:space-between; color:var(--gray); font-size:10px;">
                <span>المتاح: 5,000.00 USDT</span>
            </div>

            <button class="action-btn" id="main-btn" style="background:var(--green); color:white;">شراء / Long</button>
        </div>

        <div class="book-side">
            <div style="display:flex; justify-content:space-between; color:var(--gray); margin-bottom:5px">
                <span>السعر</span><span>الكمية</span>
            </div>
            <div id="ask-book"></div>
            <div style="text-align:center; padding:10px 0; font-size:16px; font-weight:bold; color:var(--green)">68,420.5</div>
            <div id="bid-book"></div>
        </div>
    </div>

    <nav class="bottom-nav">
        <a href="#" class="nav-item"><i class="fas fa-home"></i><br>الرئيسية</a>
        <a href="#" class="nav-item"><i class="fas fa-chart-line"></i><br>الأسواق</a>
        <a href="#" class="nav-item"><i class="fas fa-exchange-alt"></i><br>تداول</a>
        <a href="#" class="nav-item active"><i class="fas fa-file-contract"></i><br>العقود</a>
        <a href="#" class="nav-item"><i class="fas fa-wallet"></i><br>المحفظة</a>
    </nav>

    <div class="overlay" id="overlay" onclick="closeAll()"></div>
    
    <div class="modal" id="margin-modal">
        <h3 style="margin-top:0">وضع الهامش</h3>
        <p style="color:var(--gray); font-size:12px">يؤثر تغيير وضع الهامش على جميع الصفقات المفتوحة.</p>
        <button class="action-btn" style="background:#1e2329; color:white" onclick="updateM('متبادل')">متبادل (Cross)</button>
        <button class="action-btn" style="background:#1e2329; color:white" onclick="updateM('معزول')">معزول (Isolated)</button>
    </div>

    <script>
        // تبديل الشراء والبيع
        const mBuy = document.getElementById('m-buy');
        const mSell = document.getElementById('m-sell');
        const mainBtn = document.getElementById('main-btn');

        mBuy.onclick = () => {
            mBuy.classList.add('active'); mSell.classList.remove('active');
            mainBtn.style.background = 'var(--green)'; mainBtn.innerText = 'شراء / Long';
        }
        mSell.onclick = () => {
            mSell.classList.add('active'); mBuy.classList.remove('active');
            mainBtn.style.background = 'var(--red)'; mainBtn.innerText = 'بيع / Short';
        }

        // التحكم في المودال
        function toggleModal(id) {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById(id).classList.add('active');
        }
        function closeAll() {
            document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
            document.getElementById('overlay').style.display = 'none';
        }
        function updateM(val) {
            document.getElementById('m-val').innerText = val;
            closeAll();
        }

        // محاكاة دفتر الأوامر
        function gen() {
            const a = document.getElementById('ask-book');
            const b = document.getElementById('bid-book');
            a.innerHTML = ''; b.innerHTML = '';
            for(let i=0; i<8; i++){
                a.innerHTML += `<div class="book-row"><span class="price-up">684${i}5.1</span><span>${(Math.random()*2).toFixed(3)}</span></div>`;
                b.innerHTML += `<div class="book-row"><span class="price-down">6841${i}.4</span><span>${(Math.random()*2).toFixed(3)}</span></div>`;
            }
        }
        setInterval(gen, 1000);
    </script>
</body>
</html>
